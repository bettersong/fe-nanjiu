## babel发展史

Babel的前身是从6to5这个库发展而来，6to5的作者是Facebook的澳大利亚工程师Sebastian McKenzie在2014年发布的；从它的名字我们也能看出来，主要的功能就是将ES6转成ES5。

在2015年1月份，6to5和Esnext的团队决定一起开发6to5，并且改名为Babel，解析引擎改名为Babylon。

- 2015-02-15，6to5重命名为babel；
- 2015-03-31，babel 5.0发布；
- 2015-10-30，babel 6.0发布；
- 2018-08-27，babel 7.0发布；

## babel的编译流程

![1-babel-ast](/Users/songyao/Desktop/songyao/fe-nanjiu/images/22-12/1-babel-ast.png)

### parse阶段

这个阶段主要是将源码编译成AST抽象语法树，它是通过`@babel/parser`来进行词法分析与语法分析后组装成AST。

这个过程又分为词法分析、语法分析

#### 词法分析

这个过程简单理解就是将代码字符串拆分成一个个不能够再细分的`token`

> code -> token

#### 语法分析

这个过程就是将词法分析生成的`token`进行递归组装，生成AST

> token -> AST

### transform阶段

这个阶段主要是对AST进行改造（转换），通过`@babel/traverse`对AST进行遍历，并调用 `visitor` 函数修改 AST，修改 AST 自然涉及到 AST 的判断、创建、修改等，这时候就需要使用 `@babel/types` ，当需要批量创建 AST 的时候可以使用 @babel/template 来简化 AST 创建逻辑。

### generator阶段

这个阶段主要是将改造后的AST反编译成目标代码字符串，同时可生成`sourcemap`，主要依赖`@babel/generator`

## 主要API

这里我们来学习一下`Babel`的几个主要的package，从文档上来看Babel的工具包主要有以下这些：

<img src="/Users/songyao/Desktop/songyao/fe-nanjiu/images/2023/01/babel-package.png" alt="babel-package" style="zoom:50%;" />

### @babel/parser

> 从名字上很明显这个包是用来做编译的，它支持对JS、JSX、Flow、TypeScript的编译。它会根据`Babel AST`格式来将代码生成AST，需要注意的是，它默认只支持对JS的编译，对于JSX、Flow、TypeScript等需要指定对应的插件。



### @babel/core

### @babel/generator

### @babel/code-frame

### @babel/traverse

### @babel/types


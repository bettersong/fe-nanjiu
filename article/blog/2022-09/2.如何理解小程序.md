## 为什么会有小程序？

在了解小程序之前，我们先思考一下为什么会有小程序？

首先，我认为小程序的诞生得益于如今这个移动互联网时代，人们对工作、生活、娱乐等多方面的需求日益增长。在小程序诞生之前各种移动应用程序App应运而生，但是APP有一个致命的缺点就是需要用户不断地下载与升级，这就造成了App的日益丰富与手机运行速度之间的矛盾日渐加重。

所以为了解决这个问题，2013年百度正式在百度世界大会上首先提出**“轻应用”（Lght App）**的概念。（是的，你没看错，百度要先于腾讯开始研究这一块）百度将轻应用定义为一种无须下载、即搜即用的全功能App，既有媲美本地原生App（Native App）的用户体验，又具备Web App可被检索与智能分发的特性。后续UC开放平台、支付宝公众平台等类似轻应用平台相继发声。这些平台都是基于HTML5（超文本标记语言的第五次重大修改，简称H5）推出的Web App，但是由于未形成账号体系、不符合用户习惯等，用户使用率较低，活跃度较低，这些平台并没有发展起来。

随着微信用户体量的不断增长，2016年微信之父张小龙意识到微信解决以上问题有重大的潜在商业价值，可以围绕庞大的微信用户入口，构建一个应用生态闭环。

其实微信在提出小程序之前，就发布了一整套网页开发工具包，称之为 JS-SDK，开放了拍摄、录音、语音识别、二维码、地图、支付、分享、卡券等几十个API。给所有的 Web 开发者打开了一扇全新的窗户，让所有开发者都可以使用到微信的原生能力，去完成一些之前做不到或者难以做到的事情。

**从技术的发展角度来看，微信小程序是由微信中的 `webView` 和 `JS-SDK` 进化到了今天的形态。**

## 小程序与H5的区别？

> 从我们开发者角度来看，只要它能够具备免安装以及调用OS的能力就能够称为小程序了。这么看来H5天生具备免安装的特点，并且如果手机浏览器能够为H5提供访问OS的能力，那它就是一个小程序了。

我们现如今看到的这些小程序都是基于这个理念来设计的，只不过载体不是浏览器而是各自的APP了。（不如微信，支付宝，头条，QQ等）这也是为什么大家都认为小程序与H5很像了，小程序的设计初衷本就如此，并且主要开发语言也是JavaScript。

### 小程序与H5的区别主要在以下三个方面

- **运行环境：** 小程序基于浏览器内核重构的内置解析器，而 `h5` 的宿主环境是浏览器。所以小程序中没有 `DOM` 和 `BOM` 的相关 `API` ， `jQuery` 和一些 `NPM` 包都不能在小程序中使用；
- **系统权限：** 小程序能获得更多的系统权限，如网络通信状态、数据缓存能力等；
- **渲染机制：** 小程序的逻辑层和渲染层是分开的，而 `h5` 页面 `UI` 渲染跟 `JavaScript` 的脚本执行都在一个单线程中，互斥。所以 `h5` 页面中长时间的脚本运行可能会导致页面失去响应。

小程序开发过程中我们面对的是 `iOS` 和 `Android` 微信客户端和`小程序开发者工具`。根据官方文档，这三大运行环境也是有所区别的：

|     运行环境     |     逻辑层     |     渲染层     |
| :--------------: | :------------: | :------------: |
|       iOS        | JavaScriptCore |   WKWebView    |
|     Android      |   X5 JSCore    |    X5浏览器    |
| 小程序开发者工具 |      NWJS      | Chrome WebView |

所以说小程序介于 `web` 端和原生 `App` 之间，能够丰富调用功能接口，同时又跨平台。



## 小程序架构

> 小程序的运行环境分成**渲染层**和**逻辑层**，其中 WXML 模板和 WXSS 样式工作在渲染层，JS 脚本工作在逻辑层。

















